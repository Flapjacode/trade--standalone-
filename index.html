<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Trading Platform</title>
  <link rel="stylesheet" href="style.css">
  <!-- TradingView Widget -->
  <script src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js"></script>
  <!-- Jupiter Plugin -->
  <script src="https://plugin.jup.ag/plugin-v1.js"></script>
</head>
<body>
  <!-- Navigation Bar -->
  <header class="navbar">
    <div class="nav-inner">
      <div class="nav-left">
        <a class="brand" href="#charts">CryptoTrade</a>
        <nav class="nav-links">
          <a href="#charts">Charts</a>
          <a href="#signals">Signals</a>
          <a href="#ideas">Ideas</a>
          <a href="#account">Account</a>
        </nav>
      </div>
      <div class="nav-right">
        <span class="username" id="navUsername" style="display: none;"></span>
        <button class="btn-ghost" id="logoutBtn" style="display: none;">Logout</button>
        <span id="authPlaceholder">Loading...</span>
      </div>
    </div>
  </header>

  <!-- Email Verification Modal -->
  <div id="emailVerificationModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Verify Your Email</h2>
        <span class="close" onclick="closeEmailModal()">&times;</span>
      </div>
      <div class="modal-body">
        <p>We've sent a confirmation code to <strong id="verifyEmailAddress"></strong></p>
        <p style="color: #888; font-size: 14px; margin-top: 12px;">Check your email and enter the code below to verify your account.</p>
        
        <div class="form-group" style="margin-top: 20px;">
          <label>Verification Code</label>
          <input type="text" id="verificationCode" placeholder="Enter 6-digit code" maxlength="6" style="text-align: center; font-size: 20px; letter-spacing: 4px;">
        </div>
        
        <p style="color: #888; font-size: 12px; margin-top: 12px;">
          Didn't receive an email? <a href="#" onclick="resendVerificationCode(event)" style="color: #4a9eff; text-decoration: none;">Resend code</a>
        </p>
        
        <button onclick="verifyEmailCode()" class="btn-primary" style="width: 100%; margin-top: 16px;">Verify & Login</button>
        <button onclick="closeEmailModal()" class="btn-ghost" style="width: 100%; margin-top: 8px;">Cancel</button>
        
        <div id="verificationError" class="error-message" style="margin-top: 12px;"></div>
      </div>
    </div>
  </div>

  <!-- Auth Forms (initially shown) -->
  <div id="authContainer" class="auth-container">
    <div class="auth-box">
      <h1>Crypto Trading Platform</h1>
      <p>Welcome to the trading platform. Create an account or log in to start trading.</p>
      
      <div class="auth-forms">
        <div class="form-section">
          <h3>Login</h3>
          <form id="loginForm">
            <div class="form-group">
              <label>Username</label>
              <input type="text" id="loginUsername" required placeholder="Enter username">
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="loginPassword" required placeholder="Enter password">
            </div>
            <button type="submit" class="btn-primary">Login</button>
            <div id="loginError" class="error-message"></div>
          </form>
        </div>

        <div class="form-section">
          <h3>Register</h3>
          <form id="registerForm">
            <div class="form-group">
              <label>Username</label>
              <input type="text" id="regUsername" required placeholder="Choose username">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="regEmail" required placeholder="Enter your email">
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="regPassword" required placeholder="Enter password">
            </div>
            <div class="form-group">
              <label>Confirm Password</label>
              <input type="password" id="regConfirmPassword" required placeholder="Confirm password">
            </div>
            <button type="submit" class="btn-primary">Register</button>
            <div id="registerError" class="error-message"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Dashboard (initially hidden) -->
  <main id="dashboardContainer" class="app-container" style="display: none;">
    <!-- Charts Section -->
    <section id="charts" class="section">
      <h2 class="section-title">Charts</h2>
      <div class="chart-section">
        <div class="chart-main">
          <div style="display: flex; gap: 12px; margin-bottom: 12px; align-items: center;">
            <label style="color: #aaa;">Pair:</label>
            <select id="pairSelector" style="padding: 6px 8px; background: #1a1a1a; border: 1px solid #333; color: #fff; border-radius: 4px;">
              <option>COINBASE:SOLUSD</option>
              <option>BITSTAMP:BTCUSD</option>
              <option>COINBASE:ETHUSD</option>
              <option>BINANCE:XRPUSDT.P</option>
            </select>
          </div>
          <div class="tradingview-widget-container" style="height: 520px; width: 100%; border-radius: 8px; overflow: hidden; border: 1px solid rgba(255,255,255,0.03);">
            <div class="tradingview-widget-container__widget" style="height: 100%; width: 100%;"></div>
          </div>
        </div>
        <aside class="jupiter-container">
          <h4 style="margin-bottom: 12px; font-size: 14px; color: #aaa;">Jupiter Swap</h4>
          <div id="target-container" style="width: 100%; height: 568px;"></div>
        </aside>
      </div>
    </section>

    <!-- Signals Section -->
    <section id="signals" class="section">
      <h2 class="section-title">Top Signals</h2>
      <div id="signalsList" class="signals-list">
        <p style="color: #888;">Loading signals...</p>
      </div>
    </section>

    <!-- Ideas Section -->
    <section id="ideas" class="section">
      <h2 class="section-title">Trading Ideas</h2>
      
      <div class="idea-form">
        <h3>Post a Trading Idea</h3>
        <form id="ideaForm">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="ideaTitle" required placeholder="e.g., Bitcoin bullish breakout">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="ideaDescription" required placeholder="Describe your trading idea..."></textarea>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label>Pair</label>
              <input type="text" id="ideaPair" value="BTC/USDT" placeholder="e.g., BTC/USDT">
            </div>
            <div class="form-group">
              <label>Type</label>
              <select id="ideaType">
                <option value="long">Long</option>
                <option value="short">Short</option>
              </select>
            </div>
          </div>
          <button type="submit" class="btn-primary">Post Idea</button>
          <div id="ideaError" class="error-message"></div>
        </form>
      </div>

      <div id="ideasFeed" class="ideas-feed">
        <p style="color: #888;">Loading ideas...</p>
      </div>
    </section>

    <!-- Account Section -->
    <section id="account" class="section">
      <h2 class="section-title">Account</h2>
      <div style="padding: 16px; background: rgba(255,255,255,0.02); border-radius: 8px;">
        <p>Signed in as <strong id="accountUsername"></strong></p>
        <button id="dashboardLogout" class="btn-primary" style="margin-top: 12px;">Logout</button>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
