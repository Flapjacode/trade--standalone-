<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Trading Platform</title>
  <link rel="stylesheet" href="style.css">
  <!-- TradingView Widget -->
  <script src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js"></script>
  <!-- Jupiter Plugin -->
  <script src="https://plugin.jup.ag/plugin-v1.js"></script>
</head>
<body>
  <!-- Navigation Bar -->
  <header class="navbar">
    <div class="nav-inner">
      <div class="nav-left">
        <a class="brand" href="#charts">CryptoTrade</a>
        <nav class="nav-links">
          <a href="#charts">Charts</a>
          <a href="#signals">Signals</a>
          <a href="#ideas">Ideas</a>
          <a href="#account">Account</a>
        </nav>
      </div>
      <div class="nav-right">
        <span class="username hidden" id="navUsername"></span>
        <button class="btn-ghost hidden" id="logoutBtn">Logout</button>
        <span id="authPlaceholder">Loading...</span>
      </div>
    </div>
  </header>

  <!-- Email Verification Modal -->
  <div id="emailVerificationModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Verify Your Email</h2>
        <span class="close" onclick="closeEmailModal()">&times;</span>
      </div>
      <div class="modal-body">
        <p>We've sent a confirmation code to <strong id="verifyEmailAddress"></strong></p>
        <p class="verify-instructions">Check your email and enter the code below to verify your account.</p>
        <div class="form-group verify-code-group">
          <label for="verificationCode">Verification Code</label>
          <input type="text" id="verificationCode" class="verify-code-input" placeholder="Enter 6-digit code" maxlength="6">
        </div>
        <p class="verify-resend">
          Didn't receive an email? <a href="#" class="verify-resend-link" onclick="resendVerificationCode(event)">Resend code</a>
        </p>
        <button type="button" onclick="verifyEmailCode()" class="btn-primary verify-btn">Verify & Login</button>
        <button type="button" onclick="closeEmailModal()" class="btn-ghost cancel-btn">Cancel</button>
        <div id="verificationError" class="error-message verify-error"></div>
      </div>
    </div>
  </div>

  <!-- Auth Forms (initially shown) -->
  <div id="authContainer" class="auth-container">
    <div class="auth-box">
      <h1>Crypto Trading Platform</h1>
      <p>Welcome to the trading platform. Create an account or log in to start trading.</p>
      
      <div class="auth-forms">
        <div class="form-section">
          <h3>Login</h3>
          <form id="loginForm">
            <div class="form-group">
              <label>Username</label>
              <input type="text" id="loginUsername" required placeholder="Enter username">
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="loginPassword" required placeholder="Enter password">
            </div>
            <button type="submit" class="btn-primary">Login</button>
            <div id="loginError" class="error-message"></div>
          </form>
        </div>

        <div class="form-section">
          <h3>Register</h3>
          <form id="registerForm">
            <div class="form-group">
              <label>Username</label>
              <input type="text" id="regUsername" required placeholder="Choose username">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="regEmail" required placeholder="Enter your email">
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="regPassword" required placeholder="Enter password">
            </div>
            <div class="form-group">
              <label>Confirm Password</label>
              <input type="password" id="regConfirmPassword" required placeholder="Confirm password">
            </div>
            <button type="submit" class="btn-primary">Register</button>
            <div id="registerError" class="error-message"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Dashboard (initially hidden) -->
  <main id="dashboardContainer" class="app-container hidden">
    <!-- Charts Section -->
    <section id="charts" class="section">
      <h2 class="section-title">Charts</h2>
      <div class="chart-section">
        <div class="chart-main">
          <div class="pair-select-row">
            <label class="pair-label">Pair:</label>
            <select id="pairSelector" class="pair-selector" title="Select trading pair">
              <option>COINBASE:SOLUSD</option>
              <option>BITSTAMP:BTCUSD</option>
              <option>COINBASE:ETHUSD</option>
              <option>BINANCE:XRPUSDT.P</option>
            </select>
          </div>
          <div class="tradingview-widget-container tradingview-custom">
            <div class="tradingview-widget-container__widget tradingview-widget-full"></div>
          </div>
        </div>
        <aside class="jupiter-container">
          <h4 class="jupiter-title">Jupiter Swap</h4>
          <div id="target-container" class="jupiter-widget"></div>
  <script>
    window.Jupiter.init({
      displayMode: "integrated",
      integratedTargetId: "target-container",
    });
  </script>
</aside>
      </div>
    </section>

    <!-- Signals Section -->
    <section id="signals" class="section">
      <h2 class="section-title">Top Signals</h2>
      <div id="signalsList" class="signals-list">
        <p class="loading-signals">Loading signals...</p>
      </div>
    </section>

    <!-- Ideas Section -->
    <section id="ideas" class="section">
      <h2 class="section-title">Trading Ideas</h2>
      
      <div class="idea-form">
        <h3>Post a Trading Idea</h3>
        <form id="ideaForm">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="ideaTitle" required placeholder="e.g., Bitcoin bullish breakout">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="ideaDescription" required placeholder="Describe your trading idea..."></textarea>
          </div>
          <div class="idea-grid-row">
            <div class="form-group">
        <input type="text" id="ideaPair" value="BTC/USDT" placeholder="e.g., BTC/USDT">
      </div>
      <div class="form-group">
       </script>     <div class="form-group">
              <label>Type</label>
              <select id="ideaType" title="Select idea type">
                <option value="long">Long</option>
                <option value="short">Short</option>
              </select>
            </div>
          </div>
          <button type="submit" class="btn-primary">Post Idea</button>
          <div id="ideaError" class="error-message"></div>
        </form>
      </div>

      <div id="ideasFeed" class="ideas-feed">
        <p class="loading-ideas">Loading ideas...</p>
      </div>
    </section>

    <!-- Account Section -->
    <section id="account" class="section">
      <h2 class="section-title">Account</h2>
      <div class="dashboard-account-box">
        <p>Signed in as <strong id="accountUsername"></strong></p>
        <button id="dashboardLogout" class="btn-primary dashboard-logout-btn">Logout</button>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
